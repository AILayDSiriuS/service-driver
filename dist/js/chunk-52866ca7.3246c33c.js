(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52866ca7"],{"0e4b":function(e,t,s){e.exports=s.p+"img/no-result.9fa67bb7.svg"},"39f0":function(e,t,s){},c89c:function(e,t,s){"use strict";var n=s("39f0"),r=s.n(n);r.a},e9a0:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"search-page"}},[n("Header",{ref:"header"}),n("Aside",{attrs:{active:"Главная"}}),n("div",{staticClass:"container"},[n("Hint",{staticClass:"section first",attrs:{title:"Тестовый режим",description:"В настоящее время функция поиска работает только среди пользователей."}}),n("div",{staticClass:"col-12 search-page section first"},[n("div",{staticClass:"first"},[n("router-link",{attrs:{to:"/"}},[n("span",{staticClass:"prev-page"},[n("svg",{staticClass:"svg-inline--fa fa-angle-left fa-w-8",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"angle-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"}},[n("path",{attrs:{fill:"currentColor",d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"}})]),e._v(" ГЛАВНАЯ ")])]),void 0!=e.query?n("h3",[e._v("Результаты поиска по запросу «"),n("span",{staticClass:"query-span"},[e._v(e._s(e.query))]),e._v("»")]):e._e(),void 0==e.query?n("h3",[e._v("Список всех пользователей платформы")]):e._e(),n("div",{staticClass:"first"},[e._l(e.found_users,(function(e){return n("User",{key:e.id,attrs:{data:e}})})),0==e.found_users.length&&void 0!=e.query?n("div",{staticClass:"no-result col-12"},[n("img",{attrs:{src:s("0e4b"),alt:"No Results"}}),n("span",[e._v("К сожалению, по вашему запросу ничего не найдено")]),n("Button",{attrs:{isLink:"false",textContent:"Искать еще",color:"btn-b margin-btn"},on:{action:e.openSearch}})],1):e._e()],2)],1)])],1),n("Footer")],1)},r=[],a=(s("d3b7"),s("ac1f"),s("5319"),{name:"SearchResults",data:function(){return{id:"",email:"",username:"",query:this.$route.params["query"],users:[]}},beforeMount:function(){if(document.cookie){var e=document.cookie,t=e.replace(/token=/g,"");this.getData(t),this.getUsersList(t)}else this.$router.push({name:"Signin"})},computed:{found_users:function(){var e=[];if(void 0!=this.query)for(var t=0;t<this.users.length;t++)this.users[t].first_name!=this.query&&this.users[t].last_name!=this.query&&this.users[t].first_name.toLowerCase()!=this.query&&this.users[t].last_name.toLowerCase()!=this.query&&this.users[t].username!=this.query||e.push(this.users[t]);if(void 0==this.query)for(var s=0;s<this.users.length;s++)""!=this.users[s].first_name&&""!=this.users[s].last_name&&e.push(this.users[s]);return e}},methods:{getData:function(e){var t=this,s=new Headers;s.append("Authorization","Token ".concat(e));var n={method:"GET",headers:s,redirect:"follow"};fetch("http://95.214.62.187/auth/me/",n).then((function(e){return e.text()})).then((function(e){var s=JSON.parse(e);t.type=s.data.type,t.id=s.data.id,t.username=s.data.attributes.username,t.email=s.data.attributes.email})).catch((function(e){return console.log("error",e)}))},getUsersList:function(e){var t=this,s=new Headers;s.append("Authorization","Token ".concat(e));var n={method:"GET",headers:s,redirect:"follow"};fetch("http://95.214.62.187/api/v1/main/users/",n).then((function(e){return e.text()})).then((function(e){var s=JSON.parse(e);t.users=s.data.data,t.doSearch()})).catch((function(e){return console.log("error",e)}))},openSearch:function(){this.$refs.header.showSearchOverlay()}},watch:{$route:function(e){this.query=e.params["query"]}},components:{Header:function(){return Promise.all([s.e("chunk-16eaa619"),s.e("chunk-eab466f6")]).then(s.bind(null,"0418"))},Aside:function(){return s.e("chunk-6b748234").then(s.bind(null,"3d13"))},Hint:function(){return s.e("chunk-dd8a281e").then(s.bind(null,"3d93"))},User:function(){return Promise.all([s.e("chunk-16eaa619"),s.e("chunk-016c86a5"),s.e("chunk-df29e664")]).then(s.bind(null,"e282"))},Button:function(){return s.e("chunk-44baf13f").then(s.bind(null,"f577"))},Footer:function(){return s.e("chunk-d06359f4").then(s.bind(null,"fd2d"))}}}),i=a,u=(s("c89c"),s("2877")),o=Object(u["a"])(i,n,r,!1,null,"f15f2192",null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-52866ca7.3246c33c.js.map