{"version":3,"sources":["webpack:///./src/components/Blocks/FriendRequest.vue?1d28","webpack:///./src/components/Blocks/FriendRequest.vue?e219","webpack:///src/components/Blocks/FriendRequest.vue","webpack:///./src/components/Blocks/FriendRequest.vue?80de","webpack:///./src/components/Blocks/FriendRequest.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","user","first_name","last_name","on","denyRequest","_e","acceptRequest","isWaitingAnswer","answer","staticRenderFns","name","props","data","type","Object","default","beforeMount","getUser","token","methods","myHeaders","append","urlencoded","from_user","method","headers","body","fetch","requestOptions","component"],"mappings":"kHAAA,yBAA8f,EAAG,G,kECAjgB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiBF,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAG,qBAAqBH,EAAG,OAAO,CAACJ,EAAIO,GAAG,gBAAgBP,EAAIQ,GAAGR,EAAIS,KAAKC,YAAY,IAAIV,EAAIQ,GAAGR,EAAIS,KAAKE,WAAW,mCAAmCP,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAAEN,EAAmB,gBAAEI,EAAG,SAAS,CAACQ,GAAG,CAAC,MAAQZ,EAAIa,cAAc,CAACb,EAAIO,GAAG,eAAeP,EAAIc,KAAMd,EAAmB,gBAAEI,EAAG,SAAS,CAACQ,GAAG,CAAC,MAAQZ,EAAIe,gBAAgB,CAACf,EAAIO,GAAG,aAAaP,EAAIc,KAAOd,EAAIgB,gBAA4EhB,EAAIc,KAA/DV,EAAG,OAAO,CAACJ,EAAIO,GAAG,eAAeP,EAAIQ,GAAGR,EAAIiB,QAAQ,cACvrBC,EAAkB,GCetB,G,4DAAA,CACEC,KAAM,gBACNC,MAAO,CACLC,KAAM,CACJC,KAAMC,OACNC,QAFN,WAGQ,MAAO,MAIbH,KAAM,WACJ,MAAO,CACLZ,KAAM,GACNO,iBAAiB,EACjBC,OAAQ,KAGZQ,YAjBF,WAkBI,GAAJ,iBACM,IAAN,kBACA,0BACMxB,KAAKyB,QAAQC,KAGjBC,QAAS,CACPF,QAAS,SAAb,cACA,cACMG,EAAUC,OAAO,gBAAiB,SAAxC,WAEM,IAAN,sBACMC,EAAWD,OAAO,UAAW7B,KAAKoB,KAAKW,WAEvC,IAAN,GACQC,OAAQ,OACRC,QAASL,EACTM,KAAMJ,GAGRK,MAAM,0CAA2CC,GACvD,kBAAQ,OAAR,YACA,kBACQ,IAAR,gBACQ,EAAR,uBAEA,mBAAQ,OAAR,2BAEIxB,YAAa,WAAjB,WACA,kBACA,0BAEA,cACMgB,EAAUC,OAAO,gBAAiB,SAAxC,WAEM,IAAN,sBACMC,EAAWD,OAAO,YAAa7B,KAAKoB,KAAKW,WAEzC,IAAN,GACQC,OAAQ,OACRC,QAASL,EACTM,KAAMJ,GAGRK,MAAM,sEAAuEC,GACnF,kBAAQ,OAAR,YACA,kBACQ,IAAR,gBACQ,QAAR,OACQ,EAAR,mBACQ,EAAR,sBAEA,mBAAQ,OAAR,2BAEItB,cAAe,WAAnB,WACA,kBACA,0BAEA,cACMc,EAAUC,OAAO,gBAAiB,SAAxC,WAEM,IAAN,sBACMC,EAAWD,OAAO,YAAa7B,KAAKoB,KAAKW,WAEzC,IAAN,GACQC,OAAQ,OACRC,QAASL,EACTM,KAAMJ,GAGRK,MAAM,sEAAuEC,GACnF,kBAAQ,OAAR,YACA,kBACQ,IAAR,gBACQ,QAAR,OACQ,EAAR,mBACQ,EAAR,oBAEA,mBAAQ,OAAR,8BChHsW,I,wBCQlWC,EAAY,eACd,EACAvC,EACAmB,GACA,EACA,KACA,WACA,MAIa,aAAAoB,E","file":"js/chunk-69a2a600.e319c8e7.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendRequest.vue?vue&type=style&index=0&id=1eecd5da&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendRequest.vue?vue&type=style&index=0&id=1eecd5da&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"friend-request\"},[_c('div',{staticClass:\"user-picture\"}),_c('div',{staticClass:\"notification-content\"},[_c('h4',[_vm._v(\"Запрос в друзья\")]),_c('span',[_vm._v(\"Пользователь \"+_vm._s(_vm.user.first_name)+\" \"+_vm._s(_vm.user.last_name)+\" хочет добавить Вас в друзья.\")]),_c('div',{staticClass:\"request-actions\"},[(_vm.isWaitingAnswer)?_c('button',{on:{\"click\":_vm.denyRequest}},[_vm._v(\"Отклонить\")]):_vm._e(),(_vm.isWaitingAnswer)?_c('button',{on:{\"click\":_vm.acceptRequest}},[_vm._v(\"Принять\")]):_vm._e(),(!_vm.isWaitingAnswer)?_c('span',[_vm._v(\"Заявка была \"+_vm._s(_vm.answer)+\"!\")]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"friend-request\">\r\n    <div class=\"user-picture\"></div>\r\n    <div class=\"notification-content\">\r\n      <h4>Запрос в друзья</h4>\r\n      <span>Пользователь {{ user.first_name }} {{ user.last_name }} хочет добавить Вас в друзья.</span>\r\n      <div class=\"request-actions\">\r\n        <button @click=\"denyRequest\" v-if=\"isWaitingAnswer\">Отклонить</button>\r\n        <button @click=\"acceptRequest\" v-if=\"isWaitingAnswer\">Принять</button>\r\n        <span v-if=\"!isWaitingAnswer\">Заявка была {{ answer }}!</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"FriendRequest\",\r\n  props: {\r\n    data: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n  },\r\n  data: function () {\r\n    return {\r\n      user: '',\r\n      isWaitingAnswer: true,\r\n      answer: ''\r\n    }\r\n  },\r\n  beforeMount() {\r\n    if(document.cookie) {\r\n      let cookie = document.cookie,\r\n          token = cookie.replace(/token=/g, '');\r\n      this.getUser(token);\r\n    }\r\n  },\r\n  methods: {\r\n    getUser: function (token) {\r\n      let myHeaders = new Headers();\r\n      myHeaders.append(\"Authorization\", `Token ${token}`);\r\n\r\n      let urlencoded = new URLSearchParams();\r\n      urlencoded.append(\"user_id\", this.data.from_user);\r\n\r\n      let requestOptions = {\r\n        method: 'POST',\r\n        headers: myHeaders,\r\n        body: urlencoded\r\n      }\r\n\r\n      fetch(\"http://95.214.62.187/api/v1/main/users/\", requestOptions)\r\n          .then(response => response.text())\r\n          .then(result => {\r\n            let res = JSON.parse(result);\r\n            this.user = res.data.data[0];\r\n          })\r\n          .catch(error => console.log('error', error));\r\n    },\r\n    denyRequest: function () {\r\n      let cookie = document.cookie,\r\n          token = cookie.replace(/token=/g, '');\r\n\r\n      let myHeaders = new Headers();\r\n      myHeaders.append(\"Authorization\", `Token ${token}`);\r\n\r\n      let urlencoded = new URLSearchParams();\r\n      urlencoded.append(\"friend_id\", this.data.from_user);\r\n\r\n      let requestOptions = {\r\n        method: 'POST',\r\n        headers: myHeaders,\r\n        body: urlencoded\r\n      }\r\n\r\n      fetch(\"http://95.214.62.187/api/v1/main/friendship/friend_requests/reject/\", requestOptions)\r\n          .then(response => response.text())\r\n          .then(result => {\r\n            let res = JSON.parse(result);\r\n            console.log(res)\r\n            this.isWaitingAnswer = false;\r\n            this.answer = 'отклонена'\r\n          })\r\n          .catch(error => console.log('error', error));\r\n    },\r\n    acceptRequest: function () {\r\n      let cookie = document.cookie,\r\n          token = cookie.replace(/token=/g, '');\r\n\r\n      let myHeaders = new Headers();\r\n      myHeaders.append(\"Authorization\", `Token ${token}`);\r\n\r\n      let urlencoded = new URLSearchParams();\r\n      urlencoded.append(\"friend_id\", this.data.from_user);\r\n\r\n      let requestOptions = {\r\n        method: 'POST',\r\n        headers: myHeaders,\r\n        body: urlencoded\r\n      }\r\n\r\n      fetch(\"http://95.214.62.187/api/v1/main/friendship/friend_requests/accept/\", requestOptions)\r\n          .then(response => response.text())\r\n          .then(result => {\r\n            let res = JSON.parse(result);\r\n            console.log(res)\r\n            this.isWaitingAnswer = false;\r\n            this.answer = 'принята'\r\n          })\r\n          .catch(error => console.log('error', error));\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .friend-request {\r\n    height: auto;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n    padding: 20px;\r\n  }\r\n\r\n  .friend-request .user-picture {\r\n    width: 40px;\r\n    height: 40px;\r\n    background: url('../../assets/illustrations/user.jpg');\r\n    background-size: cover;\r\n    border-radius: 16px;\r\n  }\r\n\r\n  .notification-content {\r\n    margin-left: 20px;\r\n    display: flex;\r\n    flex-flow: column nowrap;\r\n    width: 270px;\r\n  }\r\n\r\n  .notification-content h4 {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: #3B405C;\r\n  }\r\n\r\n  .notification-content span {\r\n    margin-top: 8px;\r\n    font-size: 18px;\r\n    font-family: \"Source Sans Pro\", sans-serif;\r\n    color: #6D7188;\r\n    line-height: 24px;\r\n  }\r\n\r\n  .request-actions {\r\n    margin-top: 20px;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .request-actions button {\r\n    width: 125px;\r\n    height: 40px;\r\n    color: #fff;\r\n    background: #9677F1;\r\n    border: none;\r\n    outline: none;\r\n    border-radius: 7px;\r\n    font-family: \"Source Sans Pro\", sans-serif;\r\n    font-size: 16px;\r\n    font-weight: 700;\r\n  }\r\n\r\n  .request-actions button:first-child {\r\n    color: #9677F1;\r\n    border: 2px solid #9677F1;\r\n    background: none;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendRequest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendRequest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FriendRequest.vue?vue&type=template&id=1eecd5da&scoped=true&\"\nimport script from \"./FriendRequest.vue?vue&type=script&lang=js&\"\nexport * from \"./FriendRequest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FriendRequest.vue?vue&type=style&index=0&id=1eecd5da&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1eecd5da\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}