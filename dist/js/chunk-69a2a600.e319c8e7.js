(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69a2a600"],{"2fa4":function(e,t,n){"use strict";var a=n("9ce4"),r=n.n(a);r.a},"9ce4":function(e,t,n){},eb86:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friend-request"},[n("div",{staticClass:"user-picture"}),n("div",{staticClass:"notification-content"},[n("h4",[e._v("Запрос в друзья")]),n("span",[e._v("Пользователь "+e._s(e.user.first_name)+" "+e._s(e.user.last_name)+" хочет добавить Вас в друзья.")]),n("div",{staticClass:"request-actions"},[e.isWaitingAnswer?n("button",{on:{click:e.denyRequest}},[e._v("Отклонить")]):e._e(),e.isWaitingAnswer?n("button",{on:{click:e.acceptRequest}},[e._v("Принять")]):e._e(),e.isWaitingAnswer?e._e():n("span",[e._v("Заявка была "+e._s(e.answer)+"!")])])])])},r=[],s=(n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("ddb0"),n("2b3d"),{name:"FriendRequest",props:{data:{type:Object,default:function(){return{}}}},data:function(){return{user:"",isWaitingAnswer:!0,answer:""}},beforeMount:function(){if(document.cookie){var e=document.cookie,t=e.replace(/token=/g,"");this.getUser(t)}},methods:{getUser:function(e){var t=this,n=new Headers;n.append("Authorization","Token ".concat(e));var a=new URLSearchParams;a.append("user_id",this.data.from_user);var r={method:"POST",headers:n,body:a};fetch("http://95.214.62.187/api/v1/main/users/",r).then((function(e){return e.text()})).then((function(e){var n=JSON.parse(e);t.user=n.data.data[0]})).catch((function(e){return console.log("error",e)}))},denyRequest:function(){var e=this,t=document.cookie,n=t.replace(/token=/g,""),a=new Headers;a.append("Authorization","Token ".concat(n));var r=new URLSearchParams;r.append("friend_id",this.data.from_user);var s={method:"POST",headers:a,body:r};fetch("http://95.214.62.187/api/v1/main/friendship/friend_requests/reject/",s).then((function(e){return e.text()})).then((function(t){var n=JSON.parse(t);console.log(n),e.isWaitingAnswer=!1,e.answer="отклонена"})).catch((function(e){return console.log("error",e)}))},acceptRequest:function(){var e=this,t=document.cookie,n=t.replace(/token=/g,""),a=new Headers;a.append("Authorization","Token ".concat(n));var r=new URLSearchParams;r.append("friend_id",this.data.from_user);var s={method:"POST",headers:a,body:r};fetch("http://95.214.62.187/api/v1/main/friendship/friend_requests/accept/",s).then((function(e){return e.text()})).then((function(t){var n=JSON.parse(t);console.log(n),e.isWaitingAnswer=!1,e.answer="принята"})).catch((function(e){return console.log("error",e)}))}}}),i=s,o=(n("2fa4"),n("2877")),c=Object(o["a"])(i,a,r,!1,null,"1eecd5da",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-69a2a600.e319c8e7.js.map