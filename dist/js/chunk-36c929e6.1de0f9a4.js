(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36c929e6"],{"0418":function(e,i,t){"use strict";t.r(i);var n=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"header"},[n("transition",{attrs:{name:"fade"}},[n("SearchOverlay",{directives:[{name:"show",rawName:"v-show",value:e.isSearchOverlayVisible,expression:"isSearchOverlayVisible"}],on:{close:e.closeSearchOverlay}})],1),n("router-link",{attrs:{to:"/"}},[n("div",{staticClass:"logo"},[n("h2",[e._v("ServiceDriver")])])]),n("div",{staticClass:"profile"},[n("div",{staticClass:"actions"},[n("div",{class:e.search,on:{click:e.showSearchOverlay}},[n("img",{attrs:{src:t("2f4d"),alt:"Search"}})]),n("div",{class:e.notification,on:{click:e.changeNotificationMenuState}},[0!=e.requests.length?n("div",{staticClass:"notify-counter"},[n("span",[e._v(e._s(e.requests.length))])]):e._e(),n("img",{attrs:{src:t("5b43"),alt:"Notification"}}),n("transition",{attrs:{name:"fade"}},[n("NotificationMenu",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideNotificationMenu,expression:"hideNotificationMenu"},{name:"show",rawName:"v-show",value:e.isNotificationMenuOpened,expression:"isNotificationMenuOpened"}]})],1)],1)]),n("div",{staticClass:"quickProfile"},[n("div",{class:e.quickProfile,on:{click:e.changeProfileState}},[n("span",[e._v(e._s(e.name))]),n("div",{attrs:{id:"profilePicture"}}),e._m(0)]),n("transition",{attrs:{name:"fade"}},[e.isQuickProfileOpened?n("QuickProfile",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideProfile,expression:"hideProfile"}],attrs:{email:e.email,username:e.name},on:{closeProfile:e.hideProfile}}):e._e()],1)],1)])],1)},a=[function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{attrs:{id:"profileMenu"}},[n("img",{attrs:{src:t("122e"),alt:"Menu"}})])}],o=(t("99af"),t("b0c0"),t("d3b7"),t("ac1f"),t("3ca3"),t("5319"),t("ddb0"),t("2b3d"),t("e67d")),c=t.n(o),r={name:"Header",data:function(){return{id:"",email:"",username:"",name:"",isQuickProfileOpened:!1,isSearchOverlayVisible:!1,isNotificationMenuOpened:!1,requests:""}},computed:{quickProfile:function(){return this.isQuickProfileOpened?"quick-profile-wrapper quick-profile-active":"quick-profile-wrapper"},search:function(){return this.isSearchOverlayVisible?"search search-active":"search"},notification:function(){return this.isNotificationMenuOpened?"notification notification-active":"notification"}},beforeMount:function(){if(document.cookie){var e=document.cookie,i=e.replace(/token=/g,"");this.getData(i),this.getFriendRequests(i)}else this.$router.push({name:"Signin"})},methods:{getData:function(e){var i=this,t=new Headers;t.append("Authorization","Token ".concat(e));var n={method:"GET",headers:t,redirect:"follow"};fetch("http://95.214.62.187/auth/me/",n).then((function(e){return e.text()})).then((function(t){var n=JSON.parse(t);i.type=n.data.type,i.id=n.data.id,i.username=n.data.attributes.username,i.email=n.data.attributes.email,i.getUser(e)})).catch((function(e){return console.log("error",e)}))},getUser:function(e){var i=this,t=new Headers;t.append("Authorization","Token ".concat(e));var n=new URLSearchParams;n.append("user_id",this.id);var a={method:"POST",headers:t,body:n};fetch("http://95.214.62.187/api/v1/main/users/",a).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);i.name="".concat(t.data.data[0].first_name," ").concat(t.data.data[0].last_name)})).catch((function(e){return console.log("error",e)}))},hideProfile:function(){this.isQuickProfileOpened=!1},changeProfileState:function(){this.isSearchOverlayVisible=!1,this.isNotificationMenuOpened=!1,this.isQuickProfileOpened?this.isQuickProfileOpened=!1:this.isQuickProfileOpened=!0},hideNotificationMenu:function(){this.isNotificationMenuOpened=!1},changeNotificationMenuState:function(){this.isQuickProfileOpened=!1,this.isSearchOverlayVisible=!1,this.isNotificationMenuOpened?this.isNotificationMenuOpened=!1:this.isNotificationMenuOpened=!0},showSearchOverlay:function(){this.isQuickProfileOpened=!1,this.isNotificationMenuOpened=!1,this.isSearchOverlayVisible=!0},closeSearchOverlay:function(){this.isSearchOverlayVisible=!1},getFriendRequests:function(e){var i=this,t=new Headers;t.append("Authorization","Token ".concat(e));var n={method:"GET",headers:t};fetch("http://95.214.62.187/api/v1/main/friendship/friend_requests/me/",n).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);i.requests=t.data.data})).catch((function(e){return console.log("error",e)}))}},components:{QuickProfile:function(){return t.e("chunk-e76f88f8").then(t.bind(null,"5f48"))},NotificationMenu:function(){return t.e("chunk-4bd9230e").then(t.bind(null,"bc6f"))},SearchOverlay:function(){return t.e("chunk-dd7c7222").then(t.bind(null,"6426"))}},directives:{ClickOutside:c.a},mounted:function(){this.popupItem=this.$el}},s=r,u=(t("8baf"),t("2877")),d=Object(u["a"])(s,n,a,!1,null,null,null);i["default"]=d.exports},"122e":function(e,i,t){e.exports=t.p+"img/Arrow.a2da8913.svg"},"2f4d":function(e,i,t){e.exports=t.p+"img/Search.d453a31d.svg"},"5b43":function(e,i,t){e.exports=t.p+"img/Notification.073c087d.svg"},6860:function(e,i,t){},"8baf":function(e,i,t){"use strict";var n=t("6860"),a=t.n(n);a.a},e67d:function(e,i){function t(e){return"function"===typeof e.value||(console.warn("[Vue-click-outside:] provided expression",e.expression,"is not a function."),!1)}function n(e,i){if(!e||!i)return!1;for(var t=0,n=i.length;t<n;t++)try{if(e.contains(i[t]))return!0;if(i[t].contains(e))return!1}catch(a){return!1}return!1}function a(e){return"undefined"!==typeof e.componentInstance&&e.componentInstance.$isServer}e.exports={bind:function(e,i,o){if(!t(i))return;function c(i){if(o.context){var t=i.path||i.composedPath&&i.composedPath();t&&t.length>0&&t.unshift(i.target),e.contains(i.target)||n(o.context.popupItem,t)||e.__vueClickOutside__.callback(i)}}e.__vueClickOutside__={handler:c,callback:i.value};const r="ontouchstart"in document.documentElement?"touchstart":"click";!a(o)&&document.addEventListener(r,c)},update:function(e,i){t(i)&&(e.__vueClickOutside__.callback=i.value)},unbind:function(e,i,t){const n="ontouchstart"in document.documentElement?"touchstart":"click";!a(t)&&e.__vueClickOutside__&&document.removeEventListener(n,e.__vueClickOutside__.handler),delete e.__vueClickOutside__}}}}]);
//# sourceMappingURL=chunk-36c929e6.1de0f9a4.js.map